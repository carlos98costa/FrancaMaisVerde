<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Franca+Verde - Dias de Coleta</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .search-container {
            position: relative;
            max-width: 600px;
            margin: 0 auto;
        }
        .search-input-wrapper {
            position: relative;
            display: flex;
            gap: 10px;
        }
        #neighborhood-input {
            flex: 1;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        #neighborhood-input:focus {
            border-color: #4CAF50;
            outline: none;
        }
        #search-button {
            padding: 12px 24px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }
        #search-button:hover {
            background-color: #45a049;
        }
        .suggestions-list {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 0 0 8px 8px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .suggestion-item {
            padding: 10px 12px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .suggestion-item:hover {
            background-color: #f5f5f5;
        }
        .suggestion-item.active {
            background-color: #e8f5e9;
        }
        .result-area {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            background-color: #f8f9fa;
            display: none;
            border: 1px solid #e9ecef;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .result-area.show {
            display: block;
        }
        .result-area h3 {
            margin-top: 0;
            color: #343a40;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .result-area ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .result-area ul li {
            background-color: #fff;
            border: 1px solid #dee2e6;
            margin-bottom: 8px;
            padding: 12px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        .result-area ul li:last-child {
            margin-bottom: 0;
        }
        .result-area ul li strong {
            color: #007bff;
        }
        .highlight {
            background-color: #fff3cd;
            padding: 2px 4px;
            border-radius: 3px;
        }
        .secondary-button {
            display: block;
            width: fit-content;
            margin: 20px auto 0 auto;
            padding: 10px 20px;
            background-color: #6c757d;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
        }
        .secondary-button:hover {
            background-color: #5a6268;
        }
    </style>
</head>
<body>
    <header>
        <div class="menu-toggle" id="mobile-menu">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </div>
        <nav>
            <ul class="nav-list" id="nav-list">
                <li><a href="index.html"><i class="fas fa-home"></i> Início</a></li>
                <li><a href="importancia.html"><i class="fas fa-leaf"></i> Importância</a></li>
                <li><a href="separar.html"><i class="fas fa-recycle"></i> Como Separar</a></li>
                <li><a href="descarte-especial.html"><i class="fas fa-trash-alt"></i> Descarte Especial</a></li>
                <li><a href="ecopontos.html"><i class="fas fa-map-marker-alt"></i> Ecopontos</a></li>
                <li><a href="dias-coleta.html" class="active"><i class="fas fa-calendar-alt"></i> Dias de Coleta</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section class="intro-section">
            <div class="container">
                <h2>Pesquisar Dias de Coleta por Bairro</h2>
                <p>Encontre o dia e horário da coleta seletiva no seu bairro em Franca-SP.</p>
                <div class="search-container">
                    <div class="search-input-wrapper">
                        <input type="text" id="neighborhood-input" placeholder="Digite o nome do seu bairro" autocomplete="off">
                        <button id="search-button">Buscar</button>
                    </div>
                    <div class="suggestions-list" id="suggestions-list"></div>
                </div>
                <div id="result-area" class="result-area">
                    <!-- Results will be displayed here -->
                </div>
                <div id="view-hide-buttons" style="text-align: center; margin-top: 20px;">
                    <button id="view-all-button" class="secondary-button">Ver Todos os Bairros</button>
                    <button id="hide-all-button" class="secondary-button" style="display: none;">Esconder Lista</button>
                </div>
                <div id="all-neighborhoods-list" class="result-area">
                    <!-- All neighborhoods will be listed here -->
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Guia de Reciclagem para Franca-SP. Todos os direitos reservados.</p>
        <p>Desenvolvido com o compromisso de promover a sustentabilidade em nossa cidade.</p>
    </footer>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mobileMenu = document.getElementById('mobile-menu');
            const navList = document.getElementById('nav-list');

            mobileMenu.addEventListener('click', () => {
                navList.classList.toggle('active');
                mobileMenu.classList.toggle('active'); // Optional: add active class to button for styling
            });

            // Sample collection data (replace with real data)
            const collectionData = [
                { neighborhood: "Centro", day: "Segunda-feira e Quinta-feira" },
                { neighborhood: "Vila Nova", day: "Terça-feira e Sexta-feira" },
                { neighborhood: "São José", day: "Quarta-feira e Sábado" },
                { neighborhood: "Paulista", day: "Segunda-feira e Quinta-feira" },
                { neighborhood: "Estação", day: "Terça-feira e Sexta-feira" },
                { neighborhood: "Canaa", day: "Quarta-feira e Sábado" },
                { neighborhood: "Leporace", day: "Segunda-feira e Quinta-feira" },
                { neighborhood: "City", day: "Terça-feira e Sexta-feira" },
            ];

            const neighborhoodInput = document.getElementById('neighborhood-input');
            const searchButton = document.getElementById('search-button');
            const resultArea = document.getElementById('result-area');
            const suggestionsList = document.getElementById('suggestions-list');
            const viewAllButton = document.getElementById('view-all-button');
            const allNeighborhoodsListDiv = document.getElementById('all-neighborhoods-list');
            const hideAllButton = document.getElementById('hide-all-button');
            let currentFocus = -1;

            // Função para filtrar sugestões
            function filterSuggestions(input) {
                const value = input.value.toUpperCase();
                if (value.length < 2) {
                    suggestionsList.style.display = 'none';
                    return;
                }

                const filteredNeighborhoods = collectionData.filter(item => 
                    item.neighborhood.toUpperCase().includes(value)
                ).slice(0, 5); // Limita a 5 sugestões

                if (filteredNeighborhoods.length > 0) {
                    suggestionsList.innerHTML = filteredNeighborhoods.map((item, index) => {
                        const neighborhood = item.neighborhood;
                        const highlightedText = neighborhood.replace(
                            new RegExp(value, 'gi'),
                            match => `<span class="highlight">${match}</span>`
                        );
                        return `<div class="suggestion-item" data-index="${index}">${highlightedText}</div>`;
                    }).join('');
                    suggestionsList.style.display = 'block';
                } else {
                    suggestionsList.style.display = 'none';
                }
            }

            // Event listeners para o input
            neighborhoodInput.addEventListener('input', () => {
                filterSuggestions(neighborhoodInput);
                currentFocus = -1;
                resultArea.classList.remove('show'); // Hide search results when typing
                allNeighborhoodsListDiv.classList.remove('show'); // Hide all neighborhoods list when typing
            });

            neighborhoodInput.addEventListener('keydown', (e) => {
                const items = suggestionsList.getElementsByClassName('suggestion-item');
                
                if (e.key === 'ArrowDown') {
                    currentFocus++;
                    addActive(items);
                    e.preventDefault();
                } else if (e.key === 'ArrowUp') {
                    currentFocus--;
                    addActive(items);
                    e.preventDefault();
                } else if (e.key === 'Enter') {
                    e.preventDefault();
                    if (currentFocus > -1 && items[currentFocus]) {
                        items[currentFocus].click();
                    } else {
                        searchButton.click();
                    }
                } else if (e.key === 'Escape') {
                    suggestionsList.style.display = 'none';
                }
            });

            function addActive(items) {
                if (!items) return;
                removeActive(items);
                if (currentFocus >= items.length) currentFocus = 0;
                if (currentFocus < 0) currentFocus = items.length - 1;
                items[currentFocus].classList.add('active');
            }

            function removeActive(items) {
                for (let i = 0; i < items.length; i++) {
                    items[i].classList.remove('active');
                }
            }

            // Event listener para clicar em uma sugestão
            suggestionsList.addEventListener('click', (e) => {
                const item = e.target.closest('.suggestion-item');
                if (item) {
                    const index = parseInt(item.dataset.index);
                    const selectedNeighborhood = collectionData.filter(item => 
                         item.neighborhood.toUpperCase().includes(neighborhoodInput.value.toUpperCase())
                    )[index].neighborhood;
                    neighborhoodInput.value = selectedNeighborhood;
                    suggestionsList.style.display = 'none';
                    searchButton.click();
                }
            });

            // Fechar sugestões ao clicar fora
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.search-container')) {
                    suggestionsList.style.display = 'none';
                }
            });

            // Função de busca existente
            searchButton.addEventListener('click', () => {
                suggestionsList.style.display = 'none'; // Hide suggestions on search
                allNeighborhoodsListDiv.classList.remove('show'); // Hide all neighborhoods list on search
                hideAllButton.style.display = 'none'; // Hide hide button on search
                viewAllButton.style.display = 'block'; // Show view all button on search
                const searchTerm = neighborhoodInput.value.trim().toUpperCase();
                const result = collectionData.find(item => item.neighborhood.toUpperCase() === searchTerm);

                if (result) {
                    resultArea.innerHTML = `
                        <div class="result-content">
                            <h3><i class="fas fa-calendar-check"></i> Dia de Coleta Encontrado</h3>
                            <p>O dia de coleta no bairro <strong>${result.neighborhood}</strong> é:</p>
                            <p class="collection-day"><strong>${result.day}</strong></p>
                        </div>
                    `;
                    resultArea.classList.add('show');
                } else {
                    resultArea.innerHTML = `
                        <div class="result-content">
                            <h3><i class="fas fa-exclamation-circle"></i> Bairro não encontrado</h3>
                            <p>Por favor, verifique o nome digitado e tente novamente.</p>
                        </div>
                    `;
                    resultArea.classList.add('show');
                }
            });

            // Função para exibir todos os bairros
            viewAllButton.addEventListener('click', () => {
                resultArea.classList.remove('show'); // Hide search results
                suggestionsList.style.display = 'none'; // Hide suggestions
                viewAllButton.style.display = 'none'; // Hide view all button
                hideAllButton.style.display = 'block'; // Show hide button
                
                let allNeighborhoodsHtml = '<div class="result-content"><h3><i class="fas fa-list"></i> Todos os Bairros Disponíveis</h3><ul>';
                collectionData.forEach(item => {
                    allNeighborhoodsHtml += `<li data-neighborhood="${item.neighborhood}"><strong>${item.neighborhood}:</strong> ${item.day}</li>`;
                });
                allNeighborhoodsHtml += '</ul></div>';
                
                allNeighborhoodsListDiv.innerHTML = allNeighborhoodsHtml;
                allNeighborhoodsListDiv.classList.add('show');
            });

            // Função para esconder todos os bairros
            hideAllButton.addEventListener('click', () => {
                allNeighborhoodsListDiv.classList.remove('show');
                hideAllButton.style.display = 'none'; // Hide hide button
                viewAllButton.style.display = 'block'; // Show view all button
            });

            // Event listener for clicking on a neighborhood in the full list
            allNeighborhoodsListDiv.addEventListener('click', (e) => {
                const listItem = e.target.closest('li[data-neighborhood]');
                if (listItem) {
                    const selectedNeighborhood = listItem.dataset.neighborhood;
                    neighborhoodInput.value = selectedNeighborhood;
                    searchButton.click(); // Trigger search for the selected neighborhood
                    allNeighborhoodsListDiv.classList.remove('show'); // Hide the list
                    hideAllButton.style.display = 'none'; // Hide hide button
                    viewAllButton.style.display = 'block'; // Show view all button
                }
            });
        });
    </script>
</body>
</html> 